{% extends 'properties/index.html' %}
{% load static %}
{% block title %}Login/Register{% endblock title %}
{% block header %}
    {% include 'properties/header-2.html' %}
{% endblock header %}
{% block content %}

<style>
	.error-message {
		color: red;
	}
</style>
<!-- Our Dashbord -->
	<section class="our-dashbord dashbord bgc-alice-blue">
		<div class="container-fluid">
			<div class="row">
				<!-- <div class="col-xl-2 dn-lg pl0"></div> -->
				<div class="col-xl-10">
					<div class="row">
						{% if messages %}
						{% for message in messages %}
						<div class="alert alert-{{ message.tags }} col-lg-12">
						<P style="text-decoration: red;">{{ message }}</P>
						</div>
						{% endfor %}
						{% endif %}
						<div class="col-lg-6">
							<div class="login_form inner_page bgc-white mb30">
								<form method="post" action="{% url 'accounts:login' %}">
									{% if login_form.errors %}
									<p>Please correct the following errors:</p>
									{% for field in login_form %}
									{% if field.errors %}
									<div class="alert alert-danger" role="alert">
										{{ field.label }}: {{ field.errors|striptags }}
									</div>
									{% endif %}
									{% endfor %}
									{% endif %}

                                    {% csrf_token %}
		              				<h4 class="title">Sign in</h4>
									<div class="mb-2 mr-sm-2">
										<label for="formGroupExampleInput" class="form-label mb0">Login</label>
                                       {{login_form.email}} 
									   
									  <!-- <input type="text" class="form-control" id="formGroupExampleInput" placeholder="Ali Tufa.."> -->
									</div>
									<div class="form-group mb5">
                                        <label for="formGroupExampleInput" class="form-label mb0">Password</label>
                                        {{login_form.password}}
										
								    <!-- <input type="password" class="form-control" placeholder="Password"> -->
									</div>
									<div class="custom-control custom-checkbox">
										<input type="checkbox" class="custom-control-input" id="exampleCheck2">
										<label class="custom-control-label" for="exampleCheck2">Remember me</label>
										<a class="btn-fpswd float-right text-thm" href="#">Forgot</a>
									</div>
									<button type="submit" class="btn btn-log btn-block btn-thm mt20">Sign in</button>
									
								</form>
							</div>
						</div>
						<div class="col-lg-6">
							<div class="sign_up_form inner_page bgc-white">
								<h4 class="title">Registration</h4>
								<form method="post" action="{% url 'accounts:register' %}" id="register">
									{% csrf_token %}

									{% if register_form.errors %}
									<p>Please correct the following errors:</p>
									{% for field in register_form %}
									{% if field.errors %}
									<div class="alert alert-danger" role="alert">
										{{ field.label }}: {{ field.errors|striptags }}
									</div>
									{% endif %}
									{% endfor %}
									{% endif %}
								<div class="form-group input-group">
									<!-- <input type="text" class="form-control" placeholder="Login"> -->
									{{register_form.name}}
									
								</div>
								<div class="form-group input-group">
									<!-- <input type="text" class="form-control" placeholder="First name"> -->
									{{register_form.username}}
									
								</div>
								<div class="form-group input-group">
									<!-- <input type="text" class="form-control" placeholder="Last name"> -->
									{{register_form.email}}
									
								</div>
								<div class="form-group input-group">
									{{register_form.user_type}}
									
								</div>
								
								<div class="form-group input-group mb20">
									{{register_form.password}}
									
								</div>
								<div class="form-group input-group mb30">
									{{register_form.password2}}
									<div class="col-lg-12">
										<span class="error-message" id="error_popup"></span>
									</div>
								</div>
								<button type="submit" class="btn btn-signup btn-block btn-dark mb0">REGISTER</button>
								</form>
								<script>
									const form = document.getElementById("register");
									
									function checkPasswordsMatch(password, confirmPassword) {
									  return password === confirmPassword;
									}
							
									function handlePasswordInput() {
									  const password = form.querySelector('input[name="password"]').value;
									  const confirmPassword = form.querySelector('input[name="password2"]').value;
									  const passwordsMatch = checkPasswordsMatch(password, confirmPassword);
							
									  if (passwordsMatch) {
										document.getElementById("error_popup").textContent = "";
									  } else {
										document.getElementById("error_popup").textContent = "Password's Don't Match";
									  }
									}
							
									form.querySelector('input[name="password2"]').addEventListener("input", handlePasswordInput);
								  </script>
							</div>
						</div>
					</div>
					{% include 'properties/copyright.html' %}
				</div>
			</div>
		</div>
	</section>
{% endblock content %}