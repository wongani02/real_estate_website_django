{% extends 'properties/index.html' %}
{% load static %}


{% block header %}
{% include 'properties/header-2.html' %}
{% endblock header %}
{% block title %}Home{% endblock %}
{% block content %}
<!-- Our Dashbord -->
{% include 'users/dashboard-nav-1.html' %}

<!-- Our Dashbord -->
<section class="our-dashbord dashbord bgc-alice-blue">
    <div class="container-fluid">
        <div class="row">
            <div class="col-xl-2 dn-lg pl0"></div>
            <div class="col-xl-10">
                <div class="row">
                    {% include 'users/dashboard-nav.html' %}
                    <div class="col-lg-12 mb50">
                        <div class="breadcrumb_content">
                            <h2 class="breadcrumb_title">Property Creation Form</h2>
                            <!-- <p class="">Ready to jump back in?</p> -->
                        </div>
                    </div>
                </div>

                <!--					form here-->
                <form class="contact_form" id="property_creation_form" name="contact_form"
                    action="{% url 'properties:create-listing' %}" method="post" novalidate>
                    {% csrf_token %}
                    <div class="row">
                        <div class="col-lg-12">
                            <div class="new_property_form">
                                <h4 class="title mb30">Contact Information</h4>

                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="form-group mb30">
                                            <input name="name" id="property_name" class="form-control form_control"
                                                type="text" placeholder="Property Title *">
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <!-- <div class="form-group mb30">
                                                <input name="property_type" id="property_type" class="form-control form_control" type="text"
                                                       placeholder="Property Type">
                                            </div> -->
                                        <div class="ui_kit_select_search add_new_property mb30">
                                            {{form.property_type}}
                                            <!-- <select name="property_type" title="Property Type *" class="selectpicker" data-live-search="true"
                                                        data-width="100%">
                                                    <option>Property Type</option>
                                                    <option data-tokens="RENT">Rent</option>
                                                    <option data-tokens="SALE">Sale</option>
                                                    <option data-tokens="Approved">Approved</option>
                                                    <option data-tokens="Others">Others</option>
                                                </select> -->
                                        </div>
                                    </div>
                                    <div class="col-sm-12">
                                        <div class="form-group">
                                            <textarea name="property_desc" id="property_desc" class="form-control"
                                                rows="6" placeholder="Property Description *"></textarea>
                                        </div>
                                    </div>
                                </div>

                            </div>
                        </div>
                        <div class="col-lg-12">
                            <div class="new_property_form">
                                <h4 class="title mb30">Additional</h4>
                                <!--                                    <form class="contact_form" name="contact_form" action="#" method="post" novalidate>-->
                                <div class="row">
                                    <!--                                        <div class="col-md-4">-->
                                    <!--                                            <div class="form-group mb30">-->
                                    <!--                                                <input name="form_name" class="form-control form_control"-->
                                    <!--                                                       type="text" placeholder="Property ID">-->
                                    <!--                                            </div>-->
                                    <!--                                        </div>-->
                                    <!-- <div class="col-md-4">
                                            <div class="ui_kit_select_search add_new_property mb30">
                                                <select class="selectpicker" data-live-search="true"
                                                        data-width="100%">
                                                    <option>Parent property</option>
                                                    <option data-tokens="Free">Free</option>
                                                    <option data-tokens="PriceLevel2">Low: $</option>
                                                    <option data-tokens="PriceLevel3">Medium: $$</option>
                                                    <option data-tokens="PriceLevel4">High: $$$</option>
                                                </select>
                                            </div>
                                        </div> -->
                                    <div class="col-sm-4">
                                        <div class="ui_kit_select_search add_new_property mb30">
                                            {{form.status}}
                                            <!-- <select class="selectpicker" title="Property Status *" data-live-search="true"
                                                        data-width="100%">
                                                    <option>Status</option>
                                                    <option data-tokens="Active">Active</option>
                                                    <option data-tokens="Pending">Pending</option>
                                                    <option data-tokens="Approved">Inactive</option>
                                                    <option data-tokens="Others">Others</option>
                                                </select> -->
                                        </div>
                                    </div>
                                    <div class="col-sm-4">
                                        <!-- <div class="tags_input mb20">
                                                <input class="form_control" type="text" data-role="tagsinput"
                                                       value="rented, sold">
                                            </div> -->
                                        <div class="ui_kit_select_search add_new_property mb30">
                                            {{form.property_cat}}
                                            <!-- <a class="btn btn-lg btn-thm" onclick="PopUp()">+</a> -->


                                            <!-- <select class="selectpicker" title="Property Type *" data-live-search="true"
                                                        data-width="100%">
                                                    <option>Status</option>
                                                    <option data-tokens="Active">Land</option>
                                                    <option data-tokens="Pending">Building</option>
                                                    <option data-tokens="Approved">Inactive</option>
                                                    <option data-tokens="Others">Others</option>
                                                </select> -->
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="form-group mb20">
                                            <input name="form_name" class="form-control form_control" type="text"
                                                placeholder="Material">
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="form-group mb20">
                                            <input name="no_rooms" id="rooms" class="form-control form_control"
                                                type="text" placeholder="Rooms">
                                        </div>
                                    </div>
                                    <!--                                        <div class="col-md-4">-->
                                    <!--                                            <div class="form-group mb30">-->
                                    <!--                                                <input name="form_name" id="beds" class="form-control form_control"-->
                                    <!--                                                       type="text" placeholder="Beds">-->
                                    <!--                                            </div>-->
                                    <!--                                        </div>-->
                                    <div class="col-md-4">
                                        <div class="form-group mb30">
                                            <input name="no_baths" id="no_baths" class="form-control form_control"
                                                type="text" placeholder="Baths">
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="form-group mb30">
                                            <input name="no_garages" id="garages" class="form-control form_control"
                                                type="text" placeholder="Garages">
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="form-group mb30">
                                            {{form.year_built}}
                                            <!-- <input name="form_name" id="year_built" class="form-control form_control" -->
                                            <!-- type="text" placeholder="Year built"> -->
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="form-group mb30">
                                            <input name="form_name" id="area" class="form-control form_control"
                                                type="text" placeholder="Compound area (m)">
                                        </div>
                                    </div>
                                    <!-- <div class="col-md-4">
                                            <div class="form-group mb30">
                                                <input name="form_name" id="dimensions" class="form-control form_control"
                                                       type="text" placeholder="Lot dimensions">
                                            </div>
                                        </div> -->
                                    <div class="col-md-4">
                                        <div class="form-group">
                                            <input name="property_area" id="property_area"
                                                class="form-control form_control" type="text"
                                                placeholder="Property Area (m)">
                                        </div>
                                    </div>
                                </div>
                                <!--                                    </form>-->
                            </div>
                            <div class="new_property_form">
                                <h4 class="title mb30">Price</h4>
                                <!--                                    <form class="contact_form" name="contact_form" action="#" method="post" novalidate>-->
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="form-group mb30">
                                            <input name="price" id="price" class="form-control form_control" type="text"
                                                placeholder="Price">
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-group mb30">
                                            <input name="form_name" disabled class="form-control form_control"
                                                type="text" placeholder="Price Prefix (MWK)">
                                        </div>
                                    </div>
                                    <!--                                        <div class="col-md-6">-->
                                    <!--                                            <div class="form-group mb30">-->
                                    <!--                                                <input name="form_name" class="form-control form_control"-->
                                    <!--                                                       type="text" placeholder="Price Suffix">-->
                                    <!--                                            </div>-->
                                    <!--                                        </div>-->
                                    <!--                                        <div class="col-md-6">-->
                                    <!--                                            <div class="form-group">-->
                                    <!--                                                <input name="form_name" class="form-control form_control"-->
                                    <!--                                                       type="text" placeholder="Price Custom">-->
                                    <!--                                            </div>-->
                                    <!--                                        </div>-->
                                </div>
                                <!--                                    </form>-->
                            </div>
                            <div class="new_property_form">
                                <h4 class="title mb30">Location</h4>
                                <!--                                    <form class="contact_form" name="contact_form" action="#" method="post" novalidate>-->
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="ui_kit_select_search add_new_property mb30">
                                            <select class="selectpicker" data-live-search="true" data-width="100%"
                                                title="Group">
                                                <!-- <option>Regions</option> -->
                                                <option data-tokens="City">City</option>
                                                <option data-tokens="Capital">District</option>
                                                <!-- <option data-tokens="State">State</option> -->
                                                <option data-tokens="Village">Village</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="ui_kit_select_search add_new_property mb30">
                                            {{form.district}}
                                            <!-- <a class="btn btn-lg btn-thm" onclick="document.getElementById('districtForm').showModal()">+</a> -->
                                        </div>

                                        <!-- <div class="form-group mb30">
                                                <input name="addr" class="form-control form_control"
                                                       type="text" placeholder="Name of City/Capital/...">
                                            </div> -->
                                    </div>
                                    <div class="col-md-12">
                                        <div class="form-group mb30">
                                            <input name="location_area" id="location_area"
                                                class="form-control form_control" type="text"
                                                placeholder="Map Location">
                                        </div>
                                    </div>
                                    <div class="col-md-12">
                                        <div class="form-group mb20">
                                            <div class="h550 bdrs3" id="map-canvas"></div>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <input name="form_name" readonly id="latitude"
                                                class="form-control form_control" type="text" placeholder="Latitude">
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <input name="form_name" id="longitude" readonly
                                                class="form-control form_control" type="text" placeholder="Longitude">
                                        </div>
                                    </div>
                                </div>
                                <!--                                    </form>-->
                            </div>
                            <!-- get here-- -->
                            <div class="new_property_form">
                                <h4 class="mb30">Hightlights<a class="btn btn-lg btn-thm ml-4"
                                        onclick="document.getElementById('amenityForm').showModal()">Add Amenity</a>
                                </h4>
                                {{form.amenities}}
                            </div>
                            <div class="new_property_form">
                                <h4 class="title mb30">Images of your lodge, rooms and surrounding</h4>
                                <script src="https://unpkg.com/dropzone@5/dist/min/dropzone.min.js"></script>
                                <link rel="stylesheet" href="https://unpkg.com/dropzone@5/dist/min/dropzone.min.css" type="text/css" />
                                <style>
                                    .dz{
                                        border: dashed !important;
                                        border-color: #acc !important;
                                        border-radius: 10px !important;
                                    }
                                    .dz:hover{
                                        background-color: aliceblue !important;
                                    }
                                </style>

                                <form name="file-form" id="file-form" class="dropzone" method="post">
                                    <div class="fallback">
                                        <input name="file" type="file" multiple />
                                    </div>
                                </form>
                            </div>
                            <div class="new_property_form">
                                <h4 class="title mb30">Video of your lodge, rooms and surrounding</h4>
                                <div class="col-md-12">
                                    {{videos_form.link}}
                                    <!-- <div class="form-group mb30">
                                      <input name="form_name" class="form-control form_control" type="text" placeholder="Video link">
                                    </div> -->
                                </div>
                                  
                                <style>
                                    .dz{
                                        border: dashed !important;
                                        border-color: #acc !important;
                                        border-radius: 10px !important;
                                    }
                                    .dz:hover{
                                        background-color: aliceblue !important;
                                    }
                                </style>

                                <form name="video-form" id="video-form" class="dropzone" method="post">
                                    <div class="fallback">
                                        <input name="video" id="video" type="file" />
                                    </div>
                                </form>
                            </div>
                            
                            <div class="new_property_form">
                                <h4 class="title mb30">Floor Plans</h4>
                                <!--                                    <form class="contact_form" name="contact_form" action="#" method="post" novalidate>-->
                                <div class="row">
                                    <div class="col-lg-12">
                                        <div class="faq_according style2">
                                            <div class="accordion" id="accordionExample">
                                                <div class="card floor_plan">
                                                    <div class="card-header" id="headingOne">
                                                        <h2 class="mb-0">
                                                            <button class="btn btn-link" type="button"
                                                                data-toggle="collapse" data-target="#collapseOne"
                                                                aria-expanded="true" aria-controls="collapseOne">
                                                                <ul class="mb0">
                                                                    <li class="list-inline-item">First Floor
                                                                    </li>
                                                                    <li class="list-inline-item">Size: <span>1267
                                                                            Sqft</span>
                                                                    </li>
                                                                    <li class="list-inline-item">Rooms: <span>670
                                                                            Sqft</span>
                                                                    </li>
                                                                    <li class="list-inline-item">Baths: <span>530
                                                                            Sqft</span>
                                                                    </li>
                                                                    <li class="list-inline-item">Price:
                                                                        <span>$1489</span>
                                                                    </li>
                                                                </ul>
                                                            </button>
                                                            <!-- <button class="btn btn-link" type="button" data-toggle="collapse" data-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
                                                                    <span class="flor_plat_title float-left">First Floor</span>
                                                                    <ul class="flor_plat_space">
                                                                        <li class="list-inline-item">Size: <span>1267 Sqft</span></li>
                                                                        <li class="list-inline-item">Rooms: <span>670 Sqft</span></li>
                                                                        <li class="list-inline-item">Baths: <span>530 Sqft</span></li>
                                                                        <li class="list-inline-item">Price: <span>$1489</span></li>
                                                                    </ul>
                                                                </button> -->
                                                        </h2>
                                                    </div>
                                                    <div id="collapseOne" class="collapse" aria-labelledby="headingOne"
                                                        data-parent="#accordionExample">
                                                        <div class="card-body">
                                                            <img class="img-fluid mb10"
                                                                src="images/resource/floor_plan.png"
                                                                alt="floor_plan.png">
                                                            <p class="mb20">Occupying over 8,000 square feet,
                                                                perched over 1,100 feet in the air with
                                                                absolutely breathtaking panoramic 360-degree
                                                                views of all of New York City and the
                                                                surrounding tri-state area, The 82nd Floor at
                                                                432 Park Avenue has been completely reimagined
                                                                by one of the most sought-after design houses in
                                                                London and represents an utterly unique
                                                                opportunity to own a globally significant
                                                                property.</p>
                                                            <p>The residence is comprised of 5 bedrooms, 2
                                                                master bathrooms, 4 on-suite guest bathrooms, 2
                                                                powder rooms, 2 offices, 2 dressing rooms, a
                                                                media room, an oversized eat-in gourmet chef's
                                                                kitchen, and a sprawling 1,100 square-foot Great
                                                                Room perfectly situated in the prime southwest
                                                                corner of the floor.</p>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="card floor_plan">
                                                    <div class="card-header active" id="headingTwo">
                                                        <h2 class="mb-0">
                                                            <button class="btn btn-link collapsed" type="button"
                                                                data-toggle="collapse" data-target="#collapseTwo"
                                                                aria-expanded="false" aria-controls="collapseTwo">
                                                                <ul class="mb0">
                                                                    <li class="list-inline-item">First Floor
                                                                    </li>
                                                                    <li class="list-inline-item">Size: <span>1267
                                                                            Sqft</span>
                                                                    </li>
                                                                    <li class="list-inline-item">Rooms: <span>670
                                                                            Sqft</span>
                                                                    </li>
                                                                    <li class="list-inline-item">Baths: <span>530
                                                                            Sqft</span>
                                                                    </li>
                                                                    <li class="list-inline-item">Price:
                                                                        <span>$1489</span>
                                                                    </li>
                                                                </ul>
                                                            </button>
                                                        </h2>
                                                    </div>
                                                    <div id="collapseTwo" class="collapse show"
                                                        aria-labelledby="headingTwo" data-parent="#accordionExample">
                                                        <div class="card-body">
                                                            <img class="img-fluid mb10"
                                                                src="images/resource/floor_plan.png"
                                                                alt="floor_plan.png">
                                                            <p class="mb20">Occupying over 8,000 square feet,
                                                                perched over 1,100 feet in the air with
                                                                absolutely breathtaking panoramic 360-degree
                                                                views of all of New York City and the
                                                                surrounding tri-state area, The 82nd Floor at
                                                                432 Park Avenue has been completely reimagined
                                                                by one of the most sought-after design houses in
                                                                London and represents an utterly unique
                                                                opportunity to own a globally significant
                                                                property.</p>
                                                            <p>The residence is comprised of 5 bedrooms, 2
                                                                master bathrooms, 4 on-suite guest bathrooms, 2
                                                                powder rooms, 2 offices, 2 dressing rooms, a
                                                                media room, an oversized eat-in gourmet chef's
                                                                kitchen, and a sprawling 1,100 square-foot Great
                                                                Room perfectly situated in the prime southwest
                                                                corner of the floor.</p>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-group mb30">
                                            <input name="form_name" class="form-control form_control" type="text"
                                                placeholder="Name">
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-group mb30">
                                            <input name="form_type" class="form-control form_control" type="text"
                                                placeholder="Rooms">
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-group mb30">
                                            <input name="form_name" class="form-control form_control" type="text"
                                                placeholder="Baths">
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-group mb30">
                                            <input name="form_type" class="form-control form_control" type="text"
                                                placeholder="Size">
                                        </div>
                                    </div>
                                    <div class="col-sm-12">
                                        <div class="form-group mb30">
                                            <textarea name="form_message" class="form-control" rows="6"
                                                placeholder="Content"></textarea>
                                        </div>
                                    </div>
                                    <div class="col-lg-12">
                                        <h5 class="fz14 fw600 mb25">Preview Image</h5>
                                        <ul class="mb0">
                                            <li class="list-inline-item">
                                                <div class="portfolio_item">
                                                    <img class="img-fluid" src="images/listing/a2.jpg" alt="a2.jpg">
                                                    <div class="edu_stats_list" data-toggle="tooltip"
                                                        data-placement="top" title="Delete"
                                                        data-original-title="Delete">
                                                        <a href="#"><span>X</span></a>
                                                    </div>
                                                </div>
                                            </li>
                                            <li class="list-inline-item">
                                                <div class="portfolio_item">
                                                    <img class="img-fluid" src="images/listing/a3.jpg" alt="a3.jpg">
                                                    <div class="edu_stats_list" data-toggle="tooltip"
                                                        data-placement="top" title="Delete"
                                                        data-original-title="Delete">
                                                        <a href="#"><span>X</span></a>
                                                    </div>
                                                </div>
                                            </li>
                                            <li class="list-inline-item vat">
                                                <div class="upload_file_input_add_remove style-right mb30-sm">
                                                    <span class="btn_upload">
                                                        <input type="file" id="imag3" title="" class="input-img"
                                                            placeholder="UPLOAD FILES" />
                                                        <span class="">UPLOAD FILES</span>
                                                    </span>
                                                    <img id="ImgPreview3" src="" class="preview3" alt="" />
                                                    <button id="removeImage3" class="btn-rmv3" type="button">
                                                        <span>X</span></button>
                                                </div>
                                            </li>
                                        </ul>
                                    </div>
                                    <div class="col-lg-12">
                                        <div class="new_propertyform_btn">
                                            <a href="#" class="btn btn-thm ad_flor_btn">ADD FLOOR</a>
                                            <a href="#" class="btn remov_flor_btn float-right fn-520">REMOVE
                                                FLOOR</a>
                                        </div>
                                    </div>
                                </div>
                                <!--                                    </form>-->
                            </div>
                            <!-- <div class="new_property_form">
                                    <h4 class="title mb30">Select Energy Class</h4>
                                                                        <form class="contact_form" name="contact_form" action="#" method="post" novalidate>
                                    <div class="row">
                                        <div class="col-md-6">
                                            <div class="ui_kit_select_search add_new_property mb30-sm">
                                                <select class="selectpicker" data-live-search="true"
                                                        data-width="100%">
                                                    <option>Energy Class</option>
                                                    <option data-tokens="City">City</option>
                                                    <option data-tokens="Village">Village</option>
                                                    <option data-tokens="Capital">Capital</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="form-group">
                                                <input name="form_name" class="form-control form_control"
                                                       type="text" placeholder="Energy Index in kWh/m2a">
                                            </div>
                                        </div>
                                    </div>
                                </div> -->
                        </div>
                        <div class="text-right">
                            <button id="main-submit" class="btn btn-thm listing_save_btn" type="submit"
                                form="contact_form">Submit</button>
                        </div>
                    </div>
            </div>

            <!-- close form tag here-->
            </form>

            <!-- modal property category form -->
            <dialog id="addForm" style="border-radius: 8px; border-color: transparent;">
                <form name="cat_form" id="cat_form">
                    {% csrf_token %}
                    {{cat_form}}
                    <div class="form">
                        <a id="cat_btn" class="btn btn-lg btn-thm" form="#cat_form" type="submit">Save</a>
                        <a class="btn dbxshadbtn-md btn-thm3 rounded" onclick="HidePopUp()">X</a>
                    </div>
                </form>
            </dialog>

            <!-- modal districts form -->
            <dialog id="districtForm" style="border-radius: 8px; border-color: transparent;">
                <form name="dis_form" id="dis_form">
                    {% csrf_token %}
                    {{dis_form}}
                    <div class="form">
                        <a id="dis_btn" class="btn btn-lg btn-thm" form="#dis_form" type="submit">Save</a>
                        <a class="btn dbxshadbtn-md btn-thm3 rounded"
                            onclick="document.getElementById('districtForm').close()">X</a>
                    </div>
                </form>
            </dialog>

            <!-- amenity creation form -->
            <dialog id="amenityForm" style="border-radius: 8px; border-color: transparent;">
                <form name="am_form" id="am_form">
                    {% csrf_token %}
                    {{am_form}}
                    <div class="form pt-4">
                        <a id="am_btn" class="btn btn-lg btn-thm" form="#am_form" type="submit">Save</a>
                        <a class="btn dbxshadbtn-md btn-thm3 rounded"
                            onclick="document.getElementById('amenityForm').close()">X</a>
                    </div>
                </form>
            </dialog>

            <script>
                document.getElementById('main-submit').addEventListener("click", function (e) {
                    document.getElementById("property_creation_form").submit();
                })

                // Listen for when the amenity submit button is clicked
                // The button is part of a modal
                document.getElementById('am_btn').addEventListener("click", function (e) {
                    e.preventDefault();

                    $.ajax({
                        type: 'POST',
                        url: '{% url "properties:create-amenity" %}',
                        data: {
                            amenity_name: $('#amenity_name').val(),
                            amenity_desc: $('#amenity_desc').val(),
                            csrfmiddlewaretoken: $('input[name=csrfmiddlewaretoken]').val(),
                        },

                        success: function () {
                            // Hide modal before showing sweet alert
                            document.getElementById("amenityForm").close();

                            // Show sweet alert
                            Swal.fire({
                                title: 'Good job!',
                                text: 'Your Amenity Creation Was Successful',
                                icon: 'success',
                                timer: 5000,
                                showConfirmButton: false,
                                showDenyButton: false,
                                showCancelButton: false,
                            });
                        },

                        error: function () {
                            document.getElementById("amenityForm").close();

                            Swal.fire({
                                title: 'Oops...',
                                text: 'An Error Occured! Amenity Creation Unsuccessful',
                                icon: 'error',
                                timer: 5500,
                                showConfirmButton: false,
                                showDenyButton: false,
                                showCancelButton: false,
                            });
                        },
                    });
                });


                // Listen for when the property category submit button is clicked
                // The button is part of a modal
                document.getElementById('cat_btn').addEventListener("click", function (e) {
                    e.preventDefault();

                    $.ajax({
                        type: 'POST',
                        url: '{% url "properties:create-category" %}',
                        data: {
                            name: $('#cat_name').val(),
                            csrfmiddlewaretoken: $('input[name=csrfmiddlewaretoken]').val(),
                        },

                        success: function () {
                            // Hide modal before showing sweet alert
                            document.getElementById("addForm").close();

                            // Show sweet alert
                            Swal.fire({
                                title: 'Good job!',
                                text: 'Your Property Listing Creation Was Successful',
                                icon: 'success',
                                timer: 5000,
                                showConfirmButton: false,
                                showDenyButton: false,
                                showCancelButton: false,
                            });
                        },

                        error: function () {
                            document.getElementById("addForm").close();

                            Swal.fire({
                                title: 'Oops...',
                                text: 'An Error Occured! Property Listing Creation Unsuccessful',
                                icon: 'error',
                                timer: 5500,
                                showConfirmButton: false,
                                showDenyButton: false,
                                showCancelButton: false,
                            });
                        },
                    });
                });

                // Listen for when the district create button is clicked
                // The button is also part of a modal
                document.getElementById('dis_btn').addEventListener("click", function (e) {
                    e.preventDefault();
                    console.log("prevented 2");
                    // var t = document.getElementById=('district_name').value
                    // console.log(t.value);

                    $.ajax({
                        type: 'POST',
                        url: '{% url "properties:create-district" %}',
                        data: {
                            district_name: $('#district_name').val(),
                            csrfmiddlewaretoken: $('input[name=csrfmiddlewaretoken]').val(),
                        },

                        success: function () {
                            // Hide modal before showing sweet alert
                            document.getElementById("districtForm").close();

                            // Show sweet alert
                            Swal.fire({
                                title: 'Good job!',
                                text: 'Your District Creation Was Successful',
                                icon: 'success',
                                timer: 5000,
                                showConfirmButton: false,
                                showDenyButton: false,
                                showCancelButton: false,
                            });
                        },

                        error: function () {
                            document.getElementById("districtForm").close();

                            Swal.fire({
                                title: 'Oops...',
                                text: 'An Error Occured! District Creation Unsuccessful',
                                icon: 'error',
                                timer: 5500,
                                showConfirmButton: false,
                                showDenyButton: false,
                                showCancelButton: false,
                            });
                        },
                    });
                });

                // Function opens modal for Property Category
                function PopUp() {
                    document.getElementById("addForm").showModal();
                }

                // Function hides open modal for Property Category
                function HidePopUp() {
                    document.getElementById("addForm").close();
                }

            </script>

            </dialog>

            <div class="row mt50">
                <div class="col-lg-12">
                    <p class="mb0">Copyright © 2021 CreativeLayers. All Right Reserved.</p>
                </div>
            </div>
        </div>
    </div>
    </div>
</section>
<a class="scrollToHome" href="#"><i class="fa fa-angle-up"></i></a>

<!-- Wrapper End -->

<script>
    // Create auto complete variable
    let autocomplete;

    // Function handles auto completion event
    function onPlaceChanged() {
        var place = autocomplete.getPlace();

        if (!place.geometry) {
            document.getElementById('location_area').placeholder = 'Location Name';
        } else {
            codeAddress();
        }
    }

    var geocoder;
    var map;

    function initializeGeocoder() {
        autocomplete = new google.maps.places.Autocomplete(document.getElementById('location_area'), {
            types: ['establishment'],
            fields: ['geometry', 'name', 'address_components']
        });

        autocomplete.addListener('place_changed', onPlaceChanged);

        geocoder = new google.maps.Geocoder();

        var latlng = new google.maps.LatLng(-15.801934, 35.026139);
        var mapOptions = {
            zoom: 15,
            center: latlng
        }
        map = new google.maps.Map(document.getElementById("map-canvas"), mapOptions);
    }

    function codeAddress() {

        const iconurl = {
            url: '/static/icons.ico',
            scaledSize: new google.maps.Size(5, 5), // scaled size
            origin: new google.maps.Point(0,0), // origin
            anchor: new google.maps.Point(0, 0) // anchor
        };

        var address = document.getElementById('location_area').value;
        geocoder.geocode({ 'address': address }, function (results, status) {
            if (status == 'OK') {
                map.setCenter(results[0].geometry.location);
                var marker = new google.maps.Marker({
                    map: map,
                    position: results[0].geometry.location,
                    draggable: true,
                    title: "Drag Marker",
                    // icon: iconurl
                });

                AddGeometryValues(results[0].geometry.location.lat(), results[0].geometry.location.lng())

                marker.addListener('drag', handleMarkerEvent);
                marker.addListener('dragend', handleMarkerEvent);
            } else {
                alert('Geocode was not successful for the following reason: ' + status);
            }
        });
    }

    function AddGeometryValues(latitude, longitude) {
        lat = document.getElementById('latitude');
        lng = document.getElementById('longitude');

        // Add values to fields
        lat.value = latitude
        lng.value = longitude
    }

    function handleMarkerEvent(event) {
        lat = document.getElementById('latitude');
        lng = document.getElementById('longitude');

        lat.value = event.latLng.lat();
        lng.value = event.latLng.lng();
    }

</script>

{% endblock content %}