{% extends 'properties/index.html' %}
{% load static %}


{% block header %}
{% include 'properties/header-2.html' %}
{% endblock header %}
{% block title %}Home{% endblock %}
{% block content %}
<!-- Our Dashbord -->
{% include 'users/dashboard-nav-1.html' %}

<!-- Our Dashbord -->
<section class="our-dashbord dashbord bgc-alice-blue">
    <div class="container-fluid">
        <div class="row">
            <div class="col-xl-2 dn-lg pl0"></div>
            <div class="col-xl-10">
                <div class="row">
                    {% include 'users/dashboard-nav.html' %}
                    <div class="col-lg-12 mb50">
                        <div class="breadcrumb_content">
                            <h2 class="breadcrumb_title">Property Images & Videos Form</h2>
                        </div>
                        <div class="new_property_form">
                            <h4 class="title mb30">Images of your Property, Rooms and Surrounding</h4>
                            <script src="https://unpkg.com/dropzone@5/dist/min/dropzone.min.js"></script>
                            <link rel="stylesheet" href="https://unpkg.com/dropzone@5/dist/min/dropzone.min.css" type="text/css" />
                            <style>
                                .dz{
                                    border: dashed !important;
                                    border-color: #acc !important;
                                    border-radius: 10px !important;
                                }
                                .dz:hover{
                                    background-color: aliceblue !important;
                                }
                            </style>
        
                            <form method="post" action="{% url 'properties:create-media-location' %}" id="y-dz" class="dropzone dz" enctype="multipart/form-data">
                                {% csrf_token %}
                                <div class="fallback">
                                    <input id="image" name="image" type="file" multiple required/>
                                </div>
                            </form>
                            <div class="text-right mt-4">
                                <button class="btn btn-thm listing_save_btn" id="process-btn">Process</button>
                                <a type="button" class="btn btn-thm listing_save_btn" href="{% url 'properties:create-documents' %}">Next</a>
                            </div>

                            <script>
                                var myDropZone = new Dropzone("#y-dz", {
                                    paramName: "file", // The name of the file parameter to be sent to the server
                                    maxFilesize: 5, // Maximum file size in megabytes
                                    autoProcessQueue: false,
                                    parallelUploads: Infinity,
                                    acceptedFiles: ".jpg,.jpeg,.png", // Accepted file types
                                    init: function() {
                                        this.on("success", function(file, response) {
                                        // Handle successful upload
                                        console.log(response);
                                        });
                                        this.on("error", function(file, errorMessage) {
                                        // Handle upload error
                                        console.error(errorMessage);
                                        });
                                    }
                                  });

                                  var button = document.getElementById('process-btn');

                                  button.addEventListener("click", function () {myDropZone.processQueue()});
                            </script>
                            
                            <div class="col-lg-5">
                            {% if uploaded_images %}
                            <h5 class="title mt-4">Below are your recently uploaded images</h5>
                            <div class="row mt-4">
                                
                                {% for image in uploaded_images %}
                                <div class="col-sm-4 col-lg-4 pr5 pr15-767">
                                <div class="spls_style_two mb10">
                                    <a class="popup-img" href="{{image.img.url}}"><img class="img-fluid w100" src="{{image.img.url}}" alt="2.jpg"></a>
                                </div>
                                </div>
                                {% endfor %}
                                
                            </div>
                            {% endif %}
                          </div>
                        </div>
                    </div>
                </div>

            </dialog>

            <div class="row mt50">
                <div class="col-lg-12">
                    <p class="mb0">Copyright Â© 2021 CreativeLayers. All Right Reserved.</p>
                </div>
            </div>
        </div>
    </div>
    </div>
</section>
<a class="scrollToHome" href="#"><i class="fa fa-angle-up"></i></a>

<!-- Wrapper End -->

{% endblock content %}