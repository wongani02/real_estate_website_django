{% load static %}

{% for i in bnb %}
    <div class="col-lg-4 " >
        <div class="feat_property map" style="border-radius: 10px;">
            <div class="thumb">
            <a href="{% url 'bnb:bnb-detail' i.id %}">
                {% for image in i.bnb_image.all %}
                {% if image.is_feature %}
                <img class="img-whp" loading="lazy" src="{{image.image.image.url}}" alt="location.png">
                {% endif %}
                {% endfor %}
            </a>
            </div>
            <div class="details">
            <div class="tc_content">
                <h4><a class="text-uppercase" href="{% url 'bnb:bnb-detail' i.id %}">{{i.title}}</a></h4>
                <p><span class="heading-color">{{i.country}}</span><br> <span class="heading-color">{{i.price_per_night}}/night</span></p>
                <ul class="fp_meta float-right mb0 " id="bookmark_bnb{{i.id}}">
                {% if user in bnb.user_bookmark.all %}
                <li class="list-inline-item">
                    <a 
                    class="icon" 
                    hx-trigger="click"
                    hx-post="{% url 'bnb:remove-bookmark' bnb.id %}" 
                    hx-swap="outerHTML"
                    hx-target="#bookmark_bnb{{i.id}}"
                    >
                    <i class="bi bi-heart-fill text-danger"></i></a> 
                </li>
                {% else %}
                <li class="list-inline-item">
                    <a 
                    hx-trigger="click"
                    hx-target="#bookmark_bnb{{i.id}}"
                    hx-swap="outerHTML"
                    hx-post="{% url 'bnb:bnb-bookmark' i.id %}" 
                    class="icon" >
                    <span class="flaticon-heart-shape-outline"></span></a></i></li>
                {% endif %}
            </ul>
            </div>
            
            </div>
        </div>
    </div>
{% endfor %}

{% if bnb.has_next %}
    <div id="load-more-bnbs" class="nav nav-tabs mb50 col-lg-12 justify-content-center">
        <button 
        class="nav-link load-more-btn"
        hx-get="{% url 'properties:bnb-htmx' %}?page={{bnb.next_page_number}}"
        hx-target="#load-more-bnbs"
        hx-swap="outerHTML"
        >Load more...</button>
    </div>
{% endif %}